(()=>{var e={};e.id=640,e.ids=[640],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2270:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var a=s(482),r=s(9108),i=s(2563),n=s.n(i),l=s(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["booking",{children:["payment",{children:["[ticket]",{children:["infopayment",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8800)),"C:\\Source\\REACTJS\\ASG\\Cinemas\\src\\app\\booking\\payment\\[ticket]\\infopayment\\page.tsx"]}]},{}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,7287)),"C:\\Source\\REACTJS\\ASG\\Cinemas\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Source\\REACTJS\\ASG\\Cinemas\\src\\app\\booking\\payment\\[ticket]\\infopayment\\page.tsx"],m="/booking/payment/[ticket]/infopayment/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/booking/payment/[ticket]/infopayment/page",pathname:"/booking/payment/[ticket]/infopayment",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5179:(e,t,s)=>{Promise.resolve().then(s.bind(s,1477))},1477:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5344),r=s(5998),i=s(3150),n=s(2938),l=s(8159),o=s(6327),c=s(8428),d=s(3729),m=s(6013);let p=({params:e})=>{let t=(0,c.useRouter)(),s=(0,m.I0)(),[p,u]=(0,d.useState)(0),x=(0,m.v9)(e=>e.ComboToki.comboSlected),[h,f]=(0,d.useState)(""),[b,j]=(0,d.useState)(!1);(0,d.useEffect)(()=>{u(x.reduce((e,t)=>e+t.quantity*t.price,0))},[x]);let g=e.ticket;(0,d.useEffect)(()=>{s((0,o.Ut)(g))},[s]);let y=(0,m.v9)(e=>e.auth?.userId),v=(0,m.v9)(e=>e.ticket.holdTicket),N=v.price+p,w=(0,m.v9)(e=>e.Payment.paymentUrl),k=(0,m.v9)(e=>e.Payment.paymentStatus),_=(0,m.v9)(e=>e.Payment.paymentId),P=(0,m.v9)(e=>e.ticket.ticket);(0,d.useEffect)(()=>{w&&window.open(w,"_blank","width=1100,height=700")},[w,_]),(0,d.useEffect)(()=>{"succeeded"===k&&q()},[k]),(0,d.useEffect)(()=>{let e=setInterval(()=>{"waiting"===k?(j(!0),s((0,l.JV)({vnp_TxnRef:_}))):"succeeded"===k&&(clearInterval(e),j(!1))},3e3);return()=>clearInterval(e)},[s,k,_]);let q=()=>{if(""!=h&&("VNPAY"!=h||_||s((0,l.Ji)({user_id:y,amount:v.price+p,bankCode:"NCB",language:"vn"})),"succeeded"===k)){let e=v.seat_id.map(e=>e._id);s((0,o.HM)({seat_id:e,user_id:v.user_id,show_timeId:v.show_timeId._id,show_timeIndex:v.show_timeIndex,price:N,combos:v.combos,payment:h})),s((0,o.XZ)(g))}},C=()=>{s((0,o.XZ)(g)),t.push("/")},S=new Date;S.setMinutes(S.getMinutes()+15);let T=()=>{let e=new Date().getTime();return S.getTime()-e},[E,I]=(0,d.useState)(T());return(0,d.useEffect)(()=>{let e=setInterval(()=>{I(T())},1e3);return()=>clearInterval(e)},[]),(0,d.useEffect)(()=>{E<=0&&C()},[E,C]),a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:"container mx-auto my-10",children:[a.jsx(r.tB,{isLoading:b}),a.jsx(n.Z,{isOpen:"succeeded"===k,ticket:P}),a.jsx("div",{className:"backdrop-blur-md bg-gray-100/10 p-4 w-full rounded-2xl flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center mx-2",children:[a.jsx("p",{className:"font-bold text-indigo-300 text-[30px]",children:"P"}),a.jsx("p",{className:"font-bold text-pink-300 text-[30px]",children:"a"}),a.jsx("p",{className:"font-bold text-pink-400 text-[30px]",children:"y"}),a.jsx("p",{className:"font-bold text-amber-500 text-[30px]",children:"m"}),a.jsx("p",{className:"font-bold text-amber-400 text-[30px]",children:"e"}),a.jsx("p",{className:"font-bold text-amber-200 text-[30px]",children:"n"}),a.jsx("p",{className:"font-bold text-orange-600 text-[30px]",children:"t"})]})}),a.jsx("div",{className:"my-2 backdrop-blur-0 mx-auto bg-gray-100/10 rounded-xl p-4 w-[20%]",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[a.jsx("p",{className:"text-md font-bold",children:"Thời gian thanh to\xe1n"}),a.jsx("span",{children:(e=>{let t=Math.floor(e%6e4/1e3);return`${Math.floor(e/6e4)}:${t<10?"0":""}${t}`})(E)})]})}),a.jsx("div",{className:"my-5",children:a.jsx(r.F6,{onChange:e=>{f(e)}})}),a.jsx("div",{className:"my-5",children:a.jsx(i.Z,{props:{heldTicket:v,totalPriceCombos:p,totalTicketPrice:N,successBookingTicket:q}})})]})})}},3150:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var a=s(5344),r=s(5125),i=s(282),n=s(6013),l=s(3729),o=s(6327),c=s(8428);let d=({props:e})=>{let t=(0,c.useRouter)(),s=e.heldTicket,d=(0,n.I0)(),[m,p]=(0,l.useState)(0),u=(0,n.v9)(e=>e.ComboToki.comboSlected);(0,l.useEffect)(()=>{p(u.reduce((e,t)=>e+t.quantity*t.price,0))},[u]);let x=s.price+m;if(0==s.length)return a.jsx(i.Z,{});let{cinema_id:h,movie_id:f,show_times:b,room_id:j}=s.show_timeId,g={combos:u};return a.jsx(a.Fragment,{children:0===s.length?a.jsx("p",{children:"Loading..."}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"min-h-[200px] h-fit my-5 backdrop-blur-md bg-gray-100/10 rounded-2xl p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-8 gap-4 p-2",children:[(0,a.jsxs)("div",{className:"col-span-2 flex items-start ",children:[a.jsx("img",{src:f.thumnail,alt:f.title,className:"w-[120px] h-[180px] rounded-xl"}),(0,a.jsxs)("div",{className:"mx-4",children:[a.jsx("h2",{className:"my-2",children:f.title}),a.jsx("p",{className:"text-sm my-2",children:f.rated})]})]}),(0,a.jsxs)("div",{className:"col-span-3 ",children:[(0,a.jsxs)("div",{className:"flex items-start justify-start my-2",children:[a.jsx("p",{className:"font-bold w-[20%]",children:"Rạp "}),a.jsx("span",{className:" ",children:h.name})]}),(0,a.jsxs)("div",{className:"flex items-start justify-start my-2",children:[a.jsx("p",{className:"font-bold w-[20%]",children:"Suất chiếu "}),a.jsx("p",{className:"",children:b[Number(s.show_timeIndex)]})]}),(0,a.jsxs)("div",{className:"flex items-start justify-start my-2",children:[a.jsx("p",{className:"font-bold w-[20%]",children:"Ph\xf2ng chiếu "}),a.jsx("p",{className:"",children:j.room_name})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-start my-2",children:[a.jsx("p",{className:"font-bold w-[20%]",children:"Ghế"}),s.seat_id.map((e,t)=>a.jsx("p",{className:"mx-2",children:e.name},t))]})]}),(0,a.jsxs)("div",{className:"col-span-2 ",children:[(0,a.jsxs)("div",{className:"flex items-start justify-start my-2 ",children:[a.jsx("p",{className:"font-bold w-[30%]",children:"Gi\xe1 v\xe9"}),a.jsx("span",{className:" ",children:(0,r.xP)(s.price)})]}),(0,a.jsxs)("div",{className:"flex items-start justify-start my-2",children:[a.jsx("p",{className:"font-bold w-[30%]",children:"Combo"}),a.jsx("span",{className:" ",children:e.totalPriceCombos?(0,r.xP)(e.totalPriceCombos):(0,r.xP)(m)})]}),(0,a.jsxs)("div",{className:"flex items-start justify-start my-2",children:[a.jsx("p",{className:"font-bold w-[30%]",children:"Tổng tiền"}),a.jsx("span",{className:"",children:e.totalTicketPrice?(0,r.xP)(e.totalTicketPrice):(0,r.xP)(x)})]})]}),a.jsx("div",{className:"col-span-1 flex items-center justify-center my-2",children:(0,a.jsxs)("div",{onClick:()=>{if(e.successBookingTicket)return e.successBookingTicket();d((0,o.eB)({id:s._id,data:g})),t.push(`/booking/payment/${s._id}/infopayment`)},className:"relative cursor-pointer inline-flex items-center justify-center px-6 py-3 overflow-hidden font-bold text-white rounded-md shadow-2xl group",children:[a.jsx("span",{className:"absolute inset-0 w-full h-full transition duration-300 ease-out opacity-0 bg-gradient-to-br from-pink-600 via-purple-700 to-blue-400 group-hover:opacity-100"}),a.jsx("span",{className:"absolute top-0 left-0 w-full bg-gradient-to-b from-white to-transparent opacity-5 h-1/3"}),a.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1/3 bg-gradient-to-t from-white to-transparent opacity-5"}),a.jsx("span",{className:"absolute bottom-0 left-0 w-4 h-full bg-gradient-to-r from-white to-transparent opacity-5"}),a.jsx("span",{className:"absolute bottom-0 right-0 w-4 h-full bg-gradient-to-l from-white to-transparent opacity-5"}),a.jsx("span",{className:"absolute inset-0 w-full h-full border border-white rounded-md opacity-10"}),a.jsx("span",{className:"absolute w-0 h-0 transition-all duration-300 ease-out bg-white rounded-full group-hover:w-56 group-hover:h-56 opacity-5"}),a.jsx("span",{className:"relative",children:"Đặt V\xe9"})]})})]})})})})}},8800:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let a=(0,s(6843).createProxy)(String.raw`C:\Source\REACTJS\ASG\Cinemas\src\app\booking\payment\[ticket]\infopayment\page.tsx`),{__esModule:r,$$typeof:i}=a,n=a.default},3881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(337);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,156,337,971],()=>s(2270));module.exports=a})();